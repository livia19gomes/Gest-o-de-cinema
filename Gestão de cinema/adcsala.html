<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adicionar filme</title>
    <link rel="stylesheet" href="assets/css/adicfil.css">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

     <script src="assets/js/seguranca.js" defer></script>
    <script src="assets/js/seguranca-adm.js" defer></script> 



</head>

<body>
    <header>
        <img class="logo" src="assets/img/PRIME CINE logo.png" alt="Logo empresarial">


        <div class="div-header">
            <div class="btn-group">
                <button type="button" class="btn btn-secondary dropdown-toggle bg-black border-2"
                    data-bs-toggle="dropdown" aria-expanded="false">
                    MENU
                </button>

                <ul class="dropdown-menu dropdown-menu-end">
                    <li><a class="dropdown-item" href="promoadm.html">PROMO√á√ïES</a></li>
                    <li><a class="dropdown-item" href="relatorios_adm.html">RELAT√ìRIO</a></li>
                    <li><a class="dropdown-item" href="homeeae.html">HOME</a></li>
                    <li><a class="dropdown-item" href="listagem.html">LISTAGEM</a></li>
                    <li><a class="dropdown-item" href="homeeae.html">ADICIONAR SESS√ÉO</a></li>
                </ul>
            </div>

            <div class="acao">

                <div class="perfil-container">
                    <img onclick="toggleMenu()" class="btn-perfil2" src="assets/img/do-utilizador.png" alt="">
                    <div class="menu-perfil" id="menuPerfil">
                        <p>Ol√°, <span class="nome-veisitante" id="nome-visitante">(Nome do visitante)</span></p>
                        <ul>
                            <li><a href="meusPedidos.html">üì¶ Meus Pedidos</a></li>
                            <li><a href="editar.html">‚úèÔ∏è Editar perfil</a></li>
                            <li><a href="login.html">üö™ Sair da Conta</a></li>
                        </ul>
                    </div>

                </div>
            </div>

    </header>

    <main>
        <h2>Adicionar Sala</h2>
        <form id="form_cadastro">

            <label for="genero">Nome da Sala:</label>
            <input type="text" id="id_sala" name="id_sala" required>

            <label for="id_filme">Capacidade: </label>
            <select name="id_filme" id="id_filme" required>
                <option selected disabled>Informe a Capacidade</option>
                     <option>1</option>
                     <option>2</option>
                     <option>3</option>
                     <option>4</option>
                     <option>5</option>
                     <option>6</option>
                     <option>7</option>
                     <option>8</option>
                     <option>9</option>
                     <option>10</option>
                     <option>11</option>
                     <option>12</option>
                     <option>13</option>
                     <option>14</option>
                     <option>15</option>
                     <option>16</option>
                     <option>17</option>
                     <option>18</option>
                     <option>19</option>
                     <option>20</option>
                     <option>21</option>
                     <option>22</option>
                     <option>23</option>
                     <option>24</option>
                     <option>25</option>
                     <option>26</option>
                     <option>27</option>
                     <option>28</option>
                     <option>29</option>
                     <option>30</option>
                     <option>31</option>
                     <option>32</option>
                     <option>33</option>
                     <option>34</option>
                     <option>35</option>
                     <option>36</option>
                     <option>37</option>
                     <option>38</option>
                     <option>39</option>
                     <option>40</option>
                     <option>41</option>
                     <option>42</option>
                     <option>43</option>
                     <option>44</option>
                     <option>45</option>
                     <option>46</option>
                     <option>47</option>
                     <option>48</option>
                     <option>49</option>
                     <option>50</option>
                     <option>51</option>
                     <option>52</option>
                     <option>53</option>
                     <option>54</option>
                     <option>55</option>
                     <option>56</option>
                     <option>57</option>
                     <option>58</option>
                     <option>59</option>
                     <option>60</option>
                     <option>61</option>
                     <option>62</option>
                     <option>63</option>
                     <option>64</option>
                     <option>65</option>
                     <option>66</option>
                     <option>67</option>
                     <option>68</option>
                     <option>69</option>
                     <option>70</option>
                     <option>71</option>
                     <option>72</option>
                     <option>73</option>
                     <option>74</option>
                     <option>75</option>
                     <option>76</option>
                     <option>77</option>
                     <option>78</option>
                     <option>79</option>
                     <option>80</option>
                     <option>81</option>
                     <option>82</option>
                     <option>83</option>
                     <option>84</option>
                     <option>85</option>
                     <option>86</option>
                     <option>87</option>
                     <option>88</option>
                     <option>89</option>
                     <option>90</option>
                     <option>91</option>
                     <option>92</option>
                     <option>93</option>
                     <option>94</option>
                     <option>95</option>
                     <option>96</option>
                     <option>97</option>
                     <option>98</option>
                     <option>99</option>
                     <option>100</option>
                      

            </select>

            <button type="submit">Adicionar Sala</button>
            
        </form>
    </main>

    <script>
        document.getElementById('form_cadastro').addEventListener('submit', function (e) {
            e.preventDefault();
    
            const descricao = document.getElementById('id_sala').value.trim(); // nome da sala
            const capacidade = document.getElementById('id_filme').value; // capacidade
    
            if (!descricao || !capacidade || capacidade === "Informe a Capacidade") {
                Swal.fire({
                    icon: 'warning',
                    title: 'Preencha todos os campos!',
                    text: 'Voc√™ precisa informar o nome da sala e a capacidade.'
                });
                return;
            }
    
            fetch('http://10.92.3.172:5000/salas&#39;, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    descricao: descricao,
                    capacidade: capacidade
                })
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error(`Erro HTTP: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                if (data.error) {
                    Swal.fire({
                        icon: 'error',
                        title: 'Erro!',
                        text: data.error
                    });
                } else {
                    Swal.fire({
                        icon: 'success',
                        title: 'Sala adicionada!',
                        text: data.message
                    });
                    document.getElementById('form_cadastro').reset();
                }
            })
            .catch(error => {
                console.error('Erro na requisi√ß√£o:', error);
                Swal.fire({
                    icon: 'error',
                    title: 'Erro de conex√£o!',
                    text: 'N√£o foi poss√≠vel conectar ao servidor.'
                });
            });
    </script>
    
        
      




</body>

</html>